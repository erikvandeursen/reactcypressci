version: 2
orbs:
  cypress: cypress-io/cypress@1
jobs:
  build:
    steps:
      - checkout
      - run: npx react-scripts build
      - persist_to_workspace:
          root: .
          paths:
            - build/*
  
  deploy:
    steps:
      - checkout- 
      - attach_workspace:
          at: build
  
  test:
    steps:
      - checkout

workflows:
  version: 2
    jobs:
      - build
      - deploy:
          requires: 
            - build
      - test:
          requires:
            - deploy
